import { createPortal } from 'react-dom';
import { useEffect, useRef } from 'react';

interface Props {
  isOpen: boolean;
  setIsOpen: (value: boolean) => void;
}

export default function ToolTip({ isOpen, setIsOpen }: Props) {
  const tooltipRef = useRef<HTMLButtonElement>(null);

  useEffect(() => {
    const handleClick = (e: PointerEvent) => {
      if (
        tooltipRef.current &&
        !tooltipRef.current.contains(e.target as HTMLElement)
      ) {
        setIsOpen(false);
      }
    };

    if (isOpen) document.addEventListener('pointerdown', handleClick);

    return () => document.removeEventListener('pointerdown', handleClick);
  }, [isOpen, setIsOpen]);

  if (!isOpen) {
    return null;
  }

  return createPortal(
    <div className="fixed z-[60] inset-0 max-w-[430px] mx-auto">
      <div className="relative">
        <button
          className="absolute top-12 right-11 cursor-default"
          ref={tooltipRef}
        >
          <svg
            width="194"
            height="60"
            viewBox="0 0 194 60"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M148.875 1.3031C148.104 0.572306 146.896 0.572307 146.125 1.3031L141.167 6H10C4.47715 6 0 10.4772 0 16V50C0 55.5229 4.47715 60 10 60H184C189.523 60 194 55.5229 194 50V16C194 10.4772 189.523 6 184 6H153.833L148.875 1.3031Z"
              fill="#FBFCFE"
            />
            <path
              d="M27.0449 23.1729V24.1631H25.2803V30.0664H24.0742V18.7041H25.2803V23.1729H27.0449ZM18.0439 19.8086V26.207C19.6309 26.207 21.2876 26.0737 23.0967 25.6992L23.2363 26.7148C21.2939 27.1084 19.4912 27.21 17.79 27.21H16.8506V19.8086H18.0439ZM31.1013 19.5166C32.9041 19.5039 34.1863 20.6211 34.199 22.2207C34.1863 23.8203 32.9041 24.9375 31.1013 24.9375C29.3113 24.9375 27.991 23.8203 28.0037 22.2207C27.991 20.6211 29.3113 19.5039 31.1013 19.5166ZM31.1013 20.5576C29.9968 20.5576 29.1843 21.2178 29.197 22.2207C29.1843 23.2236 29.9968 23.8838 31.1013 23.8838C32.2058 23.8838 33.0183 23.2236 33.0183 22.2207C33.0183 21.2178 32.2058 20.5576 31.1013 20.5576ZM36.8015 18.7041V30.1045H35.5955V18.7041H36.8015ZM27.4578 26.6514C29.5271 26.6514 32.3962 26.626 34.8845 26.2705L34.9734 27.1465C32.3962 27.6416 29.6414 27.6543 27.6101 27.6543L27.4578 26.6514ZM51.0208 18.7041V30.0791H49.8655V24.1758H48.4563V29.5332H47.3264V19.0088H48.4563V23.1982H49.8655V18.7041H51.0208ZM46.1966 20.1514C46.1839 23.1475 45.1936 25.8262 41.9436 27.667L41.2454 26.8291C43.7718 25.4009 44.8382 23.4648 45.0286 21.1416H41.7278V20.1514H46.1966ZM53.8838 19.1865V20.7354H56.8672V19.1865H58.0606V24.1504H52.7032V19.1865H53.8838ZM53.8838 23.1855H56.8672V21.6621H53.8838V23.1855ZM61.1963 18.7041V21.0908H62.8467V22.0684H61.1963V24.5566H59.9903V18.7041H61.1963ZM61.1963 25.0518V27.9209H55.0518V29H61.5899V29.9648H53.8711V27.0322H60.003V26.0039H53.8457V25.0518H61.1963ZM76.5201 24.252V25.2295H66.148V24.252H68.6363V22.7158C67.7603 22.3604 67.2652 21.7891 67.2652 21.04C67.2652 19.6943 68.8267 18.9072 71.3277 18.9072C73.816 18.9072 75.3902 19.6943 75.3902 21.04C75.3902 21.7891 74.8887 22.3667 74.0064 22.7158V24.252H76.5201ZM71.3277 26.0039C73.7779 26.0039 75.2505 26.7275 75.2505 28.0225C75.2505 29.3428 73.7779 30.0537 71.3277 30.0537C68.8521 30.0537 67.3795 29.3428 67.3795 28.0225C67.3795 26.7275 68.8521 26.0039 71.3277 26.0039ZM71.3277 26.9307C69.5884 26.9307 68.5982 27.3242 68.5982 28.0225C68.5982 28.7334 69.5884 29.1396 71.3277 29.127C73.0416 29.1396 74.0445 28.7334 74.0445 28.0225C74.0445 27.3242 73.0416 26.9307 71.3277 26.9307ZM71.3277 19.834C69.563 19.834 68.4966 20.2783 68.5093 21.04C68.4966 21.8018 69.563 22.2334 71.3277 22.2334C73.0923 22.2334 74.1461 21.8018 74.1461 21.04C74.1461 20.2783 73.0923 19.834 71.3277 19.834ZM69.855 24.252H72.813V23.0332C72.3687 23.1094 71.8672 23.1475 71.3277 23.1475C70.7945 23.1475 70.2994 23.1094 69.855 23.0459V24.252ZM80.2083 19.5547C81.7508 19.5547 82.8807 20.8623 83.0648 22.9697H85.4134V18.7041H86.6068V30.1045H85.4134V23.9473H83.0775C82.9442 26.1626 81.7889 27.54 80.2083 27.54C78.5071 27.54 77.3138 25.9912 77.3265 23.541C77.3138 21.1035 78.5071 19.5547 80.2083 19.5547ZM80.2083 20.6338C79.18 20.6338 78.4691 21.751 78.4691 23.541C78.4691 25.3438 79.18 26.4609 80.2083 26.4609C81.2366 26.4609 81.9476 25.3438 81.9476 23.541C81.9476 21.751 81.2366 20.6338 80.2083 20.6338ZM92.6375 19.1865V20.7354H95.6209V19.1865H96.8143V24.1504H91.4569V19.1865H92.6375ZM92.6375 23.1855H95.6209V21.6621H92.6375V23.1855ZM99.95 18.7041V21.0908H101.6V22.0684H99.95V24.5566H98.744V18.7041H99.95ZM99.95 25.0518V27.9209H93.8055V29H100.344V29.9648H92.6248V27.0322H98.7567V26.0039H92.5995V25.0518H99.95ZM107.168 18.9453C109.669 18.9453 111.23 19.7578 111.23 21.1289C111.23 22.4746 109.669 23.2744 107.168 23.2744C104.679 23.2744 103.105 22.4746 103.105 21.1289C103.105 19.7578 104.679 18.9453 107.168 18.9453ZM107.168 19.8975C105.416 19.8975 104.337 20.3418 104.349 21.1289C104.337 21.8906 105.416 22.3223 107.168 22.335C108.907 22.3223 109.986 21.8906 109.986 21.1289C109.986 20.3418 108.907 19.8975 107.168 19.8975ZM111.09 26.1436V29.9395H103.232V26.1436H111.09ZM104.425 27.1084V28.9619H109.922V27.1084H104.425ZM112.36 24.1504V25.1279H101.988V24.1504H112.36ZM125.297 18.7041V24.5566H124.104V18.7041H125.297ZM125.31 25.1025V27.9463H119.038V29H125.691V29.9648H117.87V27.0322H124.116V26.0547H117.832V25.1025H125.31ZM120.016 19.8848C120.003 21.4082 121.108 22.792 122.847 23.3379L122.25 24.2773C120.923 23.8457 119.927 22.9443 119.419 21.7891C118.899 23.0332 117.883 24.0234 116.525 24.4932L115.915 23.541C117.692 22.9443 118.784 21.459 118.784 19.8848V19.0088H120.016V19.8848ZM132.273 19.3896V22.7031H128.516V24.2773C130.496 24.2837 131.575 24.2393 132.857 23.998L132.972 24.9756C131.588 25.2168 130.42 25.2549 128.147 25.2549H127.322V21.7891H131.067V20.3545H127.309V19.3896H132.273ZM136.336 18.7168V25.7119H135.13V23.7061H132.997V22.7412H135.13V21.332H132.997V20.3672H135.13V18.7168H136.336ZM136.336 26.2832V30.0918H135.13V27.2607H128.617V26.2832H136.336ZM148.2 24.6455V25.6104H137.828V24.6455H148.2ZM147.032 28.8604V29.8379H139.135V26.5371H140.354V28.8604H147.032ZM143.007 19.085C145.47 19.0723 147.07 19.9355 147.07 21.3574C147.07 22.792 145.47 23.6553 143.007 23.668C140.532 23.6553 138.945 22.792 138.945 21.3574C138.945 19.9355 140.532 19.0723 143.007 19.085ZM143.007 20.0498C141.268 20.0498 140.176 20.5449 140.189 21.3574C140.176 22.1953 141.268 22.6777 143.007 22.6777C144.747 22.6777 145.826 22.1953 145.826 21.3574C145.826 20.5449 144.747 20.0498 143.007 20.0498ZM22.7539 37.9229V38.6211C22.7539 39.5732 22.7539 41.0459 22.4238 43.0771L21.2305 42.9883C21.5161 41.1665 21.5479 39.8525 21.5605 38.9004H16.9395V37.9229H22.7539ZM19.834 41.1729V44.5752C21.0464 44.5371 22.2778 44.4546 23.4141 44.3086L23.4775 45.21C21.1035 45.5908 18.4629 45.6416 16.4443 45.6289L16.3047 44.6514C17.0156 44.645 17.8091 44.6387 18.6406 44.6133V41.1729H19.834ZM25.2803 36.7041V41.4014H27.0195V42.4297H25.2803V48.0791H24.0615V36.7041H25.2803ZM36.8777 36.7168V45.0957H35.6716V42.1377H32.8533C32.3137 42.7788 31.4885 43.166 30.5427 43.166C28.8289 43.166 27.5593 41.9727 27.5593 40.2969C27.5593 38.6084 28.8289 37.415 30.5427 37.4023C31.4822 37.4087 32.301 37.7959 32.8406 38.4307H35.6716V36.7168H36.8777ZM37.1824 46.8604V47.8379H29.489V44.2197H30.6951V46.8604H37.1824ZM30.5427 38.4814C29.4763 38.4814 28.7146 39.2178 28.7146 40.2969C28.7146 41.376 29.4763 42.0996 30.5427 42.0996C31.5711 42.0996 32.3455 41.376 32.3455 40.2969C32.3455 39.2178 31.5711 38.4814 30.5427 38.4814ZM33.3738 39.4082C33.45 39.6812 33.5007 39.9795 33.5007 40.2969C33.5007 40.6016 33.4563 40.8936 33.3738 41.1602H35.6716V39.4082H33.3738ZM47.136 37.3643V38.2529H49.5608V36.7041H50.7542V43.2168H49.5608V41.3379H47.136V42.252H41.7913V37.3643H47.136ZM42.9846 38.3164V41.3125H45.9427V38.3164H42.9846ZM50.9954 43.9277V44.8418H47.6819C47.739 45.8384 49.3387 46.8794 51.4143 47.1143L51.0081 48.0283C49.2244 47.8062 47.7454 47.0444 47.0598 46.0352C46.3743 47.0698 44.8636 47.8188 43.0735 48.0283L42.6673 47.1143C44.7556 46.9175 46.387 45.8892 46.4505 44.8418H43.1243V43.9277H46.4505V42.874H47.6819V43.9277H50.9954ZM47.136 40.3984H49.5608V39.1924H47.136V40.3984ZM61.7422 36.7041V43.3311H60.5362V40.4746H58.4034V39.4717H60.5362V36.7041H61.7422ZM61.7422 43.8643V47.9395H54.2393V43.8643H61.7422ZM55.4327 44.8164V46.9619H60.5616V44.8164H55.4327ZM56.334 38.6465C56.334 40.0684 57.3623 41.4775 59.0762 42.0742L58.4541 43.0264C57.1783 42.5757 56.2325 41.6616 55.7373 40.5381C55.2422 41.7886 54.2456 42.7915 52.8936 43.2676L52.2715 42.3154C54.0235 41.7188 55.1026 40.208 55.1026 38.6465V38.3799H52.6397V37.3896H58.7715V38.3799H56.334V38.6465ZM66.4588 37.085C68.1727 37.0977 69.4295 38.1514 69.4422 39.6367C69.4295 41.1348 68.1727 42.1758 66.4588 42.1758C64.7322 42.1758 63.4627 41.1348 63.4627 39.6367C63.4627 38.1514 64.7322 37.0977 66.4588 37.085ZM66.4588 38.1006C65.4051 38.0879 64.6307 38.71 64.6434 39.6367C64.6307 40.5762 65.4051 41.1982 66.4588 41.1982C67.4998 41.1982 68.2742 40.5762 68.2742 39.6367C68.2742 38.71 67.4998 38.0879 66.4588 38.1006ZM72.6668 36.7041V42.4932H71.4607V36.7041H72.6668ZM72.6668 43.0137V45.8828H66.3953V46.9746H73.0477V47.9395H65.2273V44.9814H71.4734V43.9785H65.1893V43.0137H72.6668ZM83.2486 36.7041V41.3252H84.899V42.3154H83.2486V48.0791H82.0425V36.7041H83.2486ZM77.6373 37.9229C77.6373 40.7666 77.1168 43.3564 75.0601 45.5527L74.108 44.8799C75.7711 43.1533 76.3741 41.1919 76.4947 38.9131H74.5142V37.9229H77.6373ZM80.773 37.9229C80.773 40.8047 80.4175 43.8262 78.3228 46.3018L77.358 45.6416C79.0464 43.6675 79.5543 41.3442 79.6431 38.9131H78.0054V37.9229H80.773ZM87.0511 44.2705C87.0638 42.6074 87.5589 42.0996 88.3968 41.5791C88.93 41.249 89.3363 40.792 89.3363 40.1191C89.3363 39.3193 88.7269 38.8242 87.9652 38.8242C87.2796 38.8242 86.6195 39.2432 86.556 40.1826H85.1849C85.2357 38.5703 86.4544 37.6816 87.9652 37.6816C89.6155 37.6816 90.72 38.6719 90.72 40.1191C90.72 41.1348 90.2376 41.8203 89.4251 42.3154C88.6634 42.7725 88.3714 43.2422 88.346 44.2705V44.3467H87.0511V44.2705ZM87.7493 47.0889C87.2542 47.0889 86.8353 46.6826 86.848 46.1875C86.8353 45.6924 87.2542 45.2861 87.7493 45.2861C88.2318 45.2861 88.6507 45.6924 88.6507 46.1875C88.6507 46.6826 88.2318 47.0889 87.7493 47.0889Z"
              fill="#181818"
            />

            <svg
              className="w-10 h-10 cursor-pointer"
              onClick={() => setIsOpen(false)}
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect x="160" y="15" width="30" height="30" fill="transparent" />
              <path
                d="M176 20L166 30"
                stroke="#5E5E5E"
                strokeWidth="1.5"
                strokeLinecap="round"
                strokeLinejoin="round"
              />
              <path
                d="M166 20L176 30"
                stroke="#5E5E5E"
                strokeWidth="1.5"
                strokeLinecap="round"
                strokeLinejoin="round"
              />
            </svg>
            <path
              d="M106.828 39.5352L97.9555 36.0154C97.9298 36.0052 97.9025 36 97.8749 36C97.3917 36 97 36.3917 97 36.8749V43.1251C97 43.6083 97.3917 44 97.8749 44C97.9025 44 97.9298 43.9948 97.9555 43.9846L106.828 40.4648C107.324 40.2681 107.572 40.1698 107.572 40C107.572 39.8302 107.324 39.7319 106.828 39.5352Z"
              fill="#BEC7FF"
            />
            <path
              d="M98 36H96.8V42.5V47.4C96.8 47.7314 97.0686 48 97.4 48C97.7314 48 98 47.7314 98 47.4V36Z"
              fill="#7A8CFF"
            />
          </svg>
        </button>
      </div>
    </div>,
    document.body,
  );
}
