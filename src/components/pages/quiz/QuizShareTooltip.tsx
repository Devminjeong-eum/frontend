import { createPortal } from 'react-dom';
import { useEffect, useRef } from 'react';

interface Props {
  isOpen: boolean;
  setIsOpen: (value: boolean) => void;
}

export default function QuizShareTooltip({ isOpen, setIsOpen }: Props) {
  const tooltipRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    const handleClick = (e: PointerEvent) => {
      if (
        tooltipRef.current &&
        !tooltipRef.current.contains(e.target as HTMLElement)
      ) {
        setIsOpen(false);
      }
    };

    if (isOpen) document.addEventListener('pointerdown', handleClick);

    return () => document.removeEventListener('pointerdown', handleClick);
  }, [isOpen, setIsOpen]);

  if (!isOpen) {
    return null;
  }

  return createPortal(
    <div className="fixed inset-0 max-w-[430px] mx-auto">
      <div className="absolute top-[50px] right-[17px]" ref={tooltipRef}>
        <svg
          width="213"
          height="61"
          viewBox="0 0 213 61"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            opacity="0.85"
            fillRule="evenodd"
            clipRule="evenodd"
            d="M199.737 1.37249C198.986 0.724794 197.874 0.724794 197.124 1.37249L191.477 6.24507H10C4.47715 6.24507 0 10.7222 0 16.2451V50.2451C0 55.7679 4.47716 60.2451 10 60.2451H203C208.523 60.2451 213 55.7679 213 50.2451V16.2451C213 11.7188 209.993 7.89493 205.867 6.66227L199.737 1.37249Z"
            fill="#70718D"
          />
          <path
            d="M26.1562 18.949V30.324H25.001V24.4968H23.541V29.74H22.4111V19.1775H23.541V23.5066H25.001V18.949H26.1562ZM16.9521 27.4294V20.2947H18.1582V26.3694C19.2056 26.3567 20.3545 26.2742 21.6494 26.0203L21.7764 27.074C20.2148 27.3533 18.9136 27.4358 17.6885 27.4294H16.9521ZM39.7915 18.949V25.5759H38.5855V22.7195H36.4527V21.7166H38.5855V18.949H39.7915ZM30.3208 24.5603C32.0664 23.9636 33.1582 22.4465 33.1519 20.8914V20.6248H30.689V19.6345H36.8208V20.6248H34.3833V20.8914C34.377 22.3069 35.4053 23.7224 37.1255 24.3191L36.5034 25.2712C35.2276 24.8269 34.2818 23.9128 33.7866 22.783C33.2915 24.0398 32.2949 25.0364 30.9429 25.5125L30.3208 24.5603ZM32.2886 30.1843V26.1091H39.7915V30.1843H32.2886ZM33.482 29.2068H38.6109V27.0613H33.482V29.2068ZM47.1106 19.9519C47.1043 21.4626 48.9514 22.8782 51.1858 23.1765L50.7161 24.1667C48.8562 23.8684 47.2249 22.9036 46.4822 21.5642C45.7395 22.9036 44.1082 23.8684 42.261 24.1667L41.7786 23.1765C44.0066 22.8782 45.8474 21.4817 45.8538 19.9519V19.3298H47.1106V19.9519ZM41.2835 26.2742V25.2839H51.6555V26.2742H47.0345V30.324H45.8538V26.2742H41.2835ZM62.6563 24.1667V25.0935H52.2461V24.1667H62.6563ZM53.4776 26.7566V25.8933H61.3741V28.3943H54.6963V29.3337H61.7295V30.1843H53.4903V27.5945H60.1807V26.7566H53.4776ZM53.5537 20.0916V19.241H61.3487V21.7039H54.7725V22.5671H61.5391V23.4177H53.5791V20.9041H60.1426V20.0916H53.5537ZM75.5806 18.9617V27.3406H74.3746V18.9617H75.5806ZM66.3384 25.0681C68.0967 24.5159 69.1758 23.113 69.1695 21.6023V21.3738H66.6431V20.4089H69.1695V18.9998H70.3882V20.4089H72.8892V21.3738H70.3755V21.6023C70.3692 23.0305 71.4737 24.3381 73.232 24.865L72.648 25.8171C71.3087 25.4045 70.3121 24.5476 69.7979 23.4495C69.2901 24.6365 68.2935 25.5759 66.9351 26.0076L66.3384 25.0681ZM68.1412 30.0828V26.5662H69.3599V29.1052H75.9234V30.0828H68.1412ZM86.1751 19.6599V20.6628C86.1751 21.7419 86.1751 22.9163 85.8577 24.5349H87.4954V25.5251H82.887V30.3367H81.6683V25.5251H77.1234V24.5349H84.639C84.9754 22.9099 84.9754 21.7229 84.9818 20.6628V20.6501H78.3929V19.6599H86.1751ZM97.8868 18.949V30.324H96.7315V18.949H97.8868ZM88.2257 23.8621C88.2257 21.3992 89.1905 19.8567 90.6759 19.863C92.0596 19.8567 92.9928 21.1707 93.1324 23.3035H94.421V19.1648H95.5762V29.7654H94.421V24.281H93.1387C93.0308 26.5027 92.085 27.8801 90.6759 27.8738C89.1905 27.8801 88.2257 26.3313 88.2257 23.8621ZM89.3428 23.8621C89.3428 25.6711 89.857 26.7375 90.6759 26.7312C91.5137 26.7375 92.0343 25.6711 92.0343 23.8621C92.0343 22.0466 91.5137 20.9866 90.6759 20.9929C89.857 20.9866 89.3428 22.0466 89.3428 23.8621ZM108.849 18.949V30.324H107.707V18.949H108.849ZM99.036 27.0359C101.448 25.6013 102.603 23.6907 102.813 21.3484H99.5692V20.3582H104.013C104.006 21.469 103.854 22.5291 103.505 23.5193H105.307V19.241H106.45V29.7654H105.307V24.4841H103.086C102.413 25.8044 101.327 26.9597 99.7215 27.8992L99.036 27.0359ZM118.092 26.0964C120.555 26.0964 122.11 26.8772 122.117 28.2039C122.11 29.5242 120.555 30.3049 118.092 30.2986C115.655 30.3049 114.093 29.5242 114.093 28.2039C114.093 26.8772 115.655 26.0964 118.092 26.0964ZM112.976 25.157V24.1794H117.127V22.0466H118.308V24.1794H123.323V25.157H112.976ZM114.182 20.4724V19.5076H122.028V20.4597C122.034 21.3674 122.034 22.3069 121.71 23.4812L120.53 23.3542C120.834 22.1926 120.834 21.3547 120.834 20.4724H114.182ZM115.299 28.2039C115.286 28.9402 116.372 29.3655 118.092 29.3718C119.831 29.3655 120.911 28.9402 120.923 28.2039C120.911 27.4548 119.831 27.0168 118.092 27.0105C116.372 27.0168 115.286 27.4548 115.299 28.2039ZM134.336 25.3728V26.363H131.695V30.324H130.477V26.363H127.76V30.324H126.516V26.363H123.926V25.3728H134.336ZM125.056 21.8943C125.062 20.3582 126.7 19.3806 129.106 19.3806C131.511 19.3806 133.162 20.3582 133.155 21.8943C133.162 23.4114 131.511 24.3699 129.106 24.3572C126.7 24.3699 125.062 23.4114 125.056 21.8943ZM126.3 21.8943C126.294 22.8274 127.417 23.405 129.106 23.405C130.8 23.405 131.918 22.8274 131.924 21.8943C131.918 20.9358 130.8 20.3518 129.106 20.3455C127.417 20.3518 126.294 20.9358 126.3 21.8943ZM143.775 18.949V23.5574H145.603V24.5603H143.775V30.324H142.582V18.949H143.775ZM134.85 21.7166V20.7263H137.656V19.1013H138.862V20.7263H141.592V21.7166H134.85ZM135.434 25.1951C135.434 23.6462 136.628 22.5544 138.266 22.5544C139.897 22.5544 141.09 23.6462 141.097 25.1951C141.09 26.7566 139.897 27.842 138.266 27.8484C136.628 27.842 135.434 26.7566 135.434 25.1951ZM136.59 25.1951C136.583 26.1853 137.294 26.8455 138.266 26.8328C139.23 26.8455 139.935 26.1853 139.941 25.1951C139.935 24.2239 139.23 23.551 138.266 23.5447C137.294 23.551 136.583 24.2239 136.59 25.1951ZM155.093 20.0408V21.158C155.087 22.5608 155.087 24.135 154.662 26.4646L153.443 26.3376C153.881 24.135 153.881 22.5227 153.887 21.158V21.0183H146.981V20.0408H155.093ZM145.889 28.7878V27.7849H149.838V23.7732H151.031V27.7849H156.261V28.7878H145.889ZM22.9697 37.7488V38.3201C22.9634 39.1707 22.9634 40.5291 22.6079 42.4778C23.084 42.446 23.5537 42.408 24.0107 42.3572L24.0869 43.2585C22.9634 43.4109 21.8018 43.5061 20.6592 43.5696V47.6638H19.4531V43.6204C18.4185 43.6521 17.4219 43.6648 16.5078 43.6648L16.3428 42.6746C17.8726 42.6619 19.6372 42.6428 21.3955 42.554C21.5225 41.9319 21.605 41.3669 21.6685 40.8591L17.2695 41.24L17.0918 40.2244L21.7446 39.9832C21.7827 39.5007 21.7891 39.0881 21.7891 38.739H17.333V37.7488H22.9697ZM24.7725 48.324V36.949H25.9912V48.324H24.7725ZM37.8045 45.8611V46.8513H27.3943V45.8611H37.8045ZM27.8767 43.0173C29.9905 42.6746 31.9519 41.1003 31.9519 39.3611V39.0056H28.2576V38.0281H36.9031V39.0056H33.2087V39.3611C33.2087 41.1003 35.1829 42.6365 37.3474 42.9792L36.865 43.9314C35.0242 43.5886 33.3294 42.5222 32.5867 41.0242C31.8567 42.5349 30.1746 43.6331 28.3718 43.9822L27.8767 43.0173ZM51.0462 36.949V48.324H49.8909V42.446H48.4182V47.74H47.3137V37.1775H48.4182V41.4558H49.8909V36.949H51.0462ZM41.6643 45.5945V38.3201H45.93V39.2976H42.8704V44.5662C44.2669 44.5598 45.3206 44.4963 46.5393 44.2615L46.6282 45.2517C45.2635 45.5374 44.0828 45.5818 42.4261 45.5945H41.6643ZM61.7422 36.949V42.738H60.5362V41.6462H57.6543V40.7068H60.5362V39.4753H57.794C57.0894 41.24 55.3692 42.408 52.8555 42.9919L52.4366 42.0017C55.1661 41.3987 56.6387 40.1292 56.8355 38.4597H53.0332V37.4695H58.1621C58.1621 37.8376 58.1304 38.1868 58.0669 38.5232H60.5362V36.949H61.7422ZM54.3028 44.1726V43.2205H61.7422V46.1023H55.5215V47.2449H62.085V48.2097H54.3282V45.1882H60.5362V44.1726H54.3028ZM75.3648 42.1921V43.157H71.9244V45.9373H76.5582V46.9275H66.148V45.9373H70.731V43.157H67.4429V37.825H75.2632V38.8025H68.649V42.1921H75.3648ZM86.6068 36.9617V45.2898H85.4007V41.0115H83.2298V40.0339H85.4007V36.9617H86.6068ZM77.1361 42.9158C78.8817 42.3254 79.9735 40.8274 79.9671 39.2595V38.8152H77.5042V37.825H83.6361V38.8152H81.1986V39.2595C81.1922 40.675 82.2205 42.1033 83.9407 42.6746L83.3187 43.6394C82.0428 43.1951 81.097 42.281 80.6019 41.1511C80.1068 42.408 79.1102 43.4109 77.7581 43.8933L77.1361 42.9158ZM79.2181 48.0828V44.5408H80.4241V47.1052H86.9114V48.0828H79.2181ZM92.0723 39.0437C92.066 40.491 93.0753 41.8113 94.8018 42.3572L94.2305 43.2966C92.9356 42.884 91.9898 42.0271 91.4884 40.948C90.9932 42.1921 89.9967 43.176 88.6319 43.6521L88.0098 42.6873C89.7872 42.1033 90.8599 40.637 90.8663 39.0564V38.739H88.3653V37.7615H94.5225V38.739H92.0723V39.0437ZM89.546 46.1658C89.546 44.8328 90.9996 44.052 93.3673 44.0583C95.7095 44.052 97.1378 44.8328 97.1378 46.1658C97.1378 47.5178 95.7095 48.3049 93.3673 48.2986C90.9996 48.3049 89.546 47.5178 89.546 46.1658ZM90.752 46.1658C90.7457 46.9275 91.7232 47.3528 93.3673 47.3464C94.9986 47.3528 95.9635 46.9275 95.9571 46.1658C95.9635 45.4231 94.9986 45.0042 93.3673 45.0105C91.7232 45.0042 90.7457 45.4231 90.752 46.1658ZM95.8302 43.7791V36.949H97.0362V39.7673H98.6866V40.7576H97.0362V43.7791H95.8302ZM104.254 37.1394C106.818 37.1331 108.31 37.825 108.316 39.0945C108.31 40.3704 106.818 41.0623 104.254 41.0623C101.689 41.0623 100.185 40.3704 100.191 39.0945C100.185 37.825 101.689 37.1331 104.254 37.1394ZM99.0741 42.7253V41.7605H109.446V42.7253H99.0741ZM100.318 44.5027V43.6013H108.139V46.2673H101.512V47.283H108.456V48.2097H100.331V45.3914H106.945V44.5027H100.318ZM101.448 39.0945C101.442 39.7991 102.445 40.1609 104.254 40.1609C106.076 40.1609 107.078 39.7991 107.072 39.0945C107.078 38.4216 106.076 38.0281 104.254 38.0281C102.445 38.0281 101.442 38.4216 101.448 39.0945ZM118.854 37.8376V38.8279H114.829V42.6365C116.734 42.6365 118.003 42.573 119.463 42.2937L119.59 43.2712C118.003 43.5505 116.632 43.6267 114.512 43.6267H113.636V37.8376H118.854ZM115.033 48.1462V44.6042H116.251V47.1687H122.739V48.1462H115.033ZM118.143 41.0115V40.0466H121.241V36.9617H122.447V45.2517H121.241V41.0115H118.143ZM133.435 36.949V48.324H132.229V43.5378H130.045V42.5349H132.229V41.1257H130.045V40.1228H132.229V36.949H133.435ZM123.837 45.239C125.557 44.3884 126.776 42.1985 126.782 40.1482V39.0818H124.269V38.0916H130.502V39.0818H128.001V40.1482C128.001 41.9319 129.22 44.0964 130.921 44.947L130.197 45.8738C128.953 45.2263 127.938 43.8743 127.423 42.3445C126.928 44.0203 125.906 45.4548 124.637 46.1531L123.837 45.239ZM145.324 45.9119V46.9148H134.914V45.9119H139.497V43.5759H136.107V37.7234H137.313V39.6785H142.899V37.7234H144.093V43.5759H140.69V45.9119H145.324ZM137.313 42.5984H142.899V40.656H137.313V42.5984ZM149.85 40.3005C149.844 42.0969 151.031 44.1028 152.757 44.9216L152.072 45.8611C150.796 45.2517 149.78 43.9695 149.266 42.4841C148.746 44.1028 147.679 45.5056 146.384 46.1531L145.673 45.2009C147.4 44.3694 148.651 42.2239 148.657 40.3005V39.0945H146.092V38.0916H152.326V39.0945H149.85V40.3005ZM153.545 48.324V36.949H154.751V41.4558H156.579V42.4714H154.751V48.324H153.545ZM158.959 38.0535L158.845 44.5916H157.588L157.474 38.0535H158.959ZM157.322 46.4324C157.315 45.9373 157.728 45.531 158.223 45.531C158.712 45.531 159.118 45.9373 159.124 46.4324C159.118 46.9275 158.712 47.3274 158.223 47.3337C157.728 47.3274 157.315 46.9275 157.322 46.4324Z"
            fill="white"
          />
          <g opacity="0.5">
            <path
              d="M196 20.245L186 30.245"
              stroke="white"
              strokeWidth="1.5"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
            <path
              d="M186 20.245L196 30.245"
              stroke="white"
              strokeWidth="1.5"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
            <rect
              x="181"
              y="15"
              width="20"
              height="20"
              fill="transparent"
              className="cursor-pointer"
              onClick={() => setIsOpen(false)}
            />
          </g>
          <path
            d="M173.828 40.7804L164.956 37.2605C164.93 37.2503 164.902 37.2451 164.875 37.2451C164.392 37.2451 164 37.6368 164 38.12V44.3702C164 44.8534 164.392 45.2451 164.875 45.2451C164.902 45.2451 164.93 45.2399 164.956 45.2297L173.828 41.7099C174.324 41.5132 174.572 41.4149 174.572 41.2451C174.572 41.0753 174.324 40.977 173.828 40.7804Z"
            fill="#BEC7FF"
          />
          <path
            d="M165 37.2451H163.8V43.7451V48.6451C163.8 48.9765 164.069 49.2451 164.4 49.2451C164.731 49.2451 165 48.9765 165 48.6451V37.2451Z"
            fill="#545454"
          />
        </svg>
      </div>
    </div>,
    document.body,
  );
}
